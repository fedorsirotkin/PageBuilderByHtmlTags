<h1>Шаблонизатор PageBuilder</h1>

> Шаблонизатор, оперирующий смысловыми блоками при помощи вложенных HTML-тегов

<p>Логика работы шаблонизатора помещена в класс PageBulder. Модуль выполняет чтение шаблона страницы и по меткам-комментариям и разбивает его на смысловые блоки, далее, при необходимости, подставляет в блоки данные. Затем собирает шаблон с данными в готовое представление.</p>

<p>Исходной точкой шаблона являются HTML-комментарии. Рассмотрим простейший пример:</p>

<pre>
&lt;!-- begin-block-a-1 --&gt; 
&lt;!-- end-block-a-1 --&gt; 
</pre>

<p>Здесь <b>begin</b> – начало смыслового блока, <b>end</b> – конец смыслового блока. Ключевое слово <b>block-a-1</b> это наименование метки, которая позволит общаться к содержимому внутри начальной и конечных меток (begin и end) в совокупности с ключевым словом.</p>

<p>Данные представляются в виде массива. Шаблон в виде строки.</p>

<pre>
// Страница в шаблоне 
$page = 'Шаблон'; 
 
// Подставляемые данные 
$data = array( 
    'Ключ_1' => 'Значение_1', 
    'Ключ_2' => 'Значение_2', 
    'Ключ_3' => 'Значение_3', 
    'Ключ_4' => 'Значение_4', 
    'Ключ_5' => 'Значение_5', 
    // ... 
    'Ключ_N' => 'Значение_N', 
); 
// Объект сборщика страниц 
$pb = new PageBuilder($page, $data); 
 
// Сборка страницы 
$pb->build();
</pre>

<p>Пример организации вложенных меток:</p>

<pre>
&lt;!-- begin-block-a-1 --&gt; 
Content in block block-a-1 
    &lt;!-- begin-block-b-1 --&gt; 
    Content in block block-b-1 
         &lt;!-- begin-block-c-1 --&gt; 
         Content in block block-с-1 
         &lt;!-- end-block-c-1 --&gt; 
         &lt;!-- begin-block-c-2 --&gt; 
         Content in block block-с-2 
         &lt;!-- end-block-c-2 --&gt; 
         &lt;!-- begin-block-c-3 --&gt; 
         Content in block block-с-3 
         &lt;!-- end-block-c-3 --&gt; 
    &lt;!-- end-block-b-1 --&gt; 
    &lt;!-- begin-block-b-2 --&gt; 
    Content in block block-b-2 
    &lt;!-- end-block-b-2 --&gt; 
    &lt;!-- begin-block-b-3 --&gt; 
    Content in block block-b-3 
    &lt;!-- end-block-b-3 --&gt; 
&lt;!-- end-block-a-1 --&gt; 
&lt;!-- begin-block-a-2 --&gt; 
Content in block block-a-2 
&lt;!-- end-block-a-2 --&gt;
</pre>

<p>Алгоритм шаблонизатора рекурсивно выполнит сборку шаблона на смысловые блоки, при необходимости, подставит данные в смысловые блоки, затем выполнит построение представления.</p>